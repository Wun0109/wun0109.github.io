<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pose å§¿å‹¢åµæ¸¬ Ã— å‹•ä½œäº’å‹•åˆ†æ</title>
  <link href="../style.css" rel="stylesheet" />
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.1/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background-color: #f5f7fa;
      font-family: 'Noto Sans TC', sans-serif;
    }

    .title-bar {
      background: linear-gradient(90deg, #3b5773 0%, #4e6c8f 100%);
      color: white;
      text-align: center;
      padding: 1.5rem 1rem 1rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    .title-bar h1 {
      font-size: 2.2rem;
      font-weight: 700;
      letter-spacing: 0.5px;
    }

    .content-section {
      max-width: 880px;
      margin: 0 auto;
      padding: 0 1rem 2rem;
    }

    .section-heading {
      font-size: 1.25rem;
      margin-top: 2.5rem;
      font-weight: bold;
      color: #3b5773;
      border-bottom: 2px solid #3b5773;
      padding-bottom: 0.4rem;
    }

    .image-box {
      text-align: center;
      margin: 1.5rem auto;
    }

    .image-box img {
      max-width: 100%;
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 0.5rem;
    }

    figcaption {
      font-size: 0.9rem;
      color: #555;
      margin-top: 0.25rem;
    }

    .info-group {
      text-align: left;
      max-width: 800px;
      margin: 1rem auto;
      padding-left: 0;
    }

    .info-group p {
      margin: 0.2rem 0;
    }

    .code-container {
      margin: 2rem 0;
      background: #f8f9fa;
      border-radius: 8px;
      padding: 1rem;
      border: 1px solid #ccc;
      position: relative;
      text-align: left;
    }

    .code-container details summary {
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 0.5rem;
      color: #3b5773;
    }

    .code-container pre {
      background: #f1f1f1;
      padding: 1rem;
      border-radius: 8px;
      overflow-x: auto;
      margin: 0;
      white-space: pre-wrap;
    }

    .copy-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: #3b5773;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 0.3rem 0.7rem;
      font-size: 0.85rem;
      cursor: pointer;
    }

    .copy-btn:active {
      background-color: #2c3e50;
    }

    .back-btn {
      margin-top: 2rem;
      display: inline-block;
      background-color: #3b5773;
      color: white;
      padding: 0.6rem 1.2rem;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
      transition: background-color 0.3s ease;
    }

    .back-btn:hover {
      background-color: #2c3e50;
    }
  </style>
</head>
<body>
  <div class="title-bar">
    <h1>Pose å§¿å‹¢åµæ¸¬ Ã— å‹•ä½œäº’å‹•åˆ†æ</h1>
  </div>
  <section class="welcome-section">
    <div class="info-group">
      <p>ğŸ“Œ <strong>æŠ€è¡“å·¥å…·ï¼š</strong>MediaPipe Poseã€DrawingUtilsã€è§’åº¦åˆ¤æ–·ã€np.interpã€YouTube ä¸²æµ</p>
      <p>ğŸ¯ <strong>æ‡‰ç”¨æƒ…å¢ƒï¼š</strong>é è·å¥èº«æ•™ç·´ã€é‹å‹•å§¿å‹¢åˆ†æã€æ‰‹å‹¢è¾¨è­˜èˆ‡äº’å‹•éŠæˆ²é–‹ç™¼</p>
    </div>

    <h2 class="section-heading">åŠŸèƒ½ç°¡ä»‹</h2>
    <p class="info-group">
      æœ¬å°ˆæ¡ˆæ•´åˆ <strong>MediaPipe Pose</strong> æŠ€è¡“ï¼Œå»ºæ§‹å‡ºä¸€å¥—å®Œæ•´çš„ <strong>äººé«”å§¿å‹¢åµæ¸¬èˆ‡äº’å‹•åˆ†æç³»çµ±</strong>ï¼Œå¯æ‡‰ç”¨æ–¼å¤šç¨®å½±åƒä¾†æºï¼ŒåŒ…å«ï¼š
      <br><br>
      <strong>å³æ™‚æ”å½±æ©Ÿè¼¸å…¥ï¼ˆAI071ï¼‰</strong>ï¼šå¯æ‡‰ç”¨æ–¼ <strong>é è·æ•™å­¸</strong> æˆ– <strong>ç¾å ´äº’å‹•å±•ç¤º</strong>ï¼Œå³æ™‚å‘ˆç¾ä½¿ç”¨è€…çš„éª¨æ¶å‹•ä½œã€‚<br>
      <strong>è‡ªéŒ„å½±ç‰‡åˆ†æï¼ˆAI072ï¼‰</strong>ï¼šæä¾› <strong>é›™è¦–çª—æ¯”å°ç•«é¢</strong>ï¼Œç”¨æ–¼ <strong>é«”èƒ½æª¢æ¸¬å›é¡§</strong> æˆ– <strong>å§¿å‹¢æ•™å­¸å½±ç‰‡è£½ä½œ</strong>ã€‚<br>
      <strong>YouTube ä¸²æµå§¿å‹¢è¾¨è­˜ï¼ˆAI073ï¼‰</strong>ï¼šå¯æ‡‰ç”¨æ–¼ <strong>ç¶²è·¯å¥èº«èª²ç¨‹è¼”åŠ©</strong>ï¼Œå³æ™‚åˆ†æå…¬é–‹å½±ç‰‡ä¸­çš„å‹•ä½œã€‚<br>
      <strong>æ‰‹è‡‚å½èˆ‰è§’åº¦èˆ‡æ¬¡æ•¸çµ±è¨ˆï¼ˆAI074ï¼‰</strong>ï¼šé©ç”¨æ–¼ <strong>å¥èº«å‹•ä½œè¨ˆæ•¸</strong>ã€<strong>å‹•ä½œå“è³ªè©•ä¼°</strong> èˆ‡ <strong>è¦–è¦ºåŒ–å›é¥‹è¨­è¨ˆ</strong>ã€‚<br><br>
      æ•´é«”ç³»çµ±ä¸åƒ…æ”¯æ´ <strong>éª¨æ¶è¦–è¦ºåŒ–æ¨™è¨˜</strong>ï¼Œä¹Ÿèƒ½é€é <strong>è§’åº¦åˆ¤æ–·èˆ‡æ¢ç‹€åœ–å‘ˆç¾</strong>ï¼Œæä¾›ä½¿ç”¨è€…æ¸…æ™°çš„è¨“ç·´é€²åº¦èˆ‡å‹•ä½œè¡¨ç¾å›é¥‹ã€‚æ­¤æŠ€è¡“å…·å‚™é«˜åº¦å»¶ä¼¸æ€§ï¼Œæœªä¾†å¯æ‹“å±•è‡³ <strong>å¥èº«ç›£æ§ç³»çµ±</strong>ã€<strong>å€‹äººé‹å‹•æ•™ç·´å¹³å°</strong>ã€<strong>äº’å‹•å¼èª²ç¨‹é–‹ç™¼</strong> ç­‰å¤šå…ƒå ´æ™¯ã€‚

    </p>


    <div class="image-box">
      <img src="../images/pose_black1.png" alt="pose2 é»‘åº•å°ç…§" />
      <figcaption>â–² è‡ªéŒ„å½±ç‰‡è¼¸å…¥ï¼šäººç‰©å‹•ä½œå§¿å‹¢åµæ¸¬èˆ‡é»‘åº•æ¨™è¨˜å°ç…§é¡¯ç¤º</figcaption>
    </div>
    <div class="image-box">
      <img src="../images/pose_black2.png" alt="pose2 é»‘åº•å°ç…§2" />
      <figcaption>â–² YouTube ä¸²æµä¾†æºï¼šå¾ç¶²è·¯å½±ç‰‡å³æ™‚å–å¾—ç•«é¢ä¸¦é€²è¡Œéª¨æ¶è¾¨è­˜</figcaption>
    </div>
    <div class="image-box">
      <img src="../images/pose_count.png" alt="pose æ‰‹å‹¢å½èˆ‰çµ±è¨ˆ" />
      <figcaption>â–² å¯¦ä½œå·¦å³æ‰‹å½èˆ‰è§’åº¦åµæ¸¬ï¼Œä¸¦åŠ ä¸Šè¨ˆæ•¸å™¨èˆ‡æ¢ç‹€åœ–å‹•æ…‹å›é¥‹</figcaption>
    </div>

    <section class="content-section">

      <h2 class="section-heading">ç¨‹å¼ç¢¼ç‰‡æ®µ</h2>

      <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">è¤‡è£½</button>
        <details open>
          <summary>ğŸ“„ AI071ï½œå³æ™‚æ”å½±æ©Ÿå§¿å‹¢åµæ¸¬</summary>
          <pre><code>import cv2
      import mediapipe as mp

      conn = mp.solutions.pose.POSE_CONNECTIONS
      pose = mp.solutions.pose.Pose(min_detection_confidence=0.5, min_tracking_confidence=0.5)
      mpd = mp.solutions.drawing_utils
      spec = mp.solutions.drawing_styles.get_default_pose_landmarks_style()

      cap = cv2.VideoCapture(0)
      while cap.isOpened():
        success, image = cap.read()
        imgrgb = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)
        results = pose.process(imgrgb)
        if results.pose_landmarks:
            mpd.draw_landmarks(image, results.pose_landmarks, conn, spec)
        cv2.imshow('M11508001_pose1', image)
        if cv2.waitKey(5) & 0xFF == 27:
            break
      cap.release()
      cv2.destroyAllWindows()</code></pre>
        </details>
      </div>

      <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">è¤‡è£½</button>
        <details open>
          <summary>ğŸ“„ AI072ï½œè‡ªéŒ„å½±ç‰‡éª¨æ¶åµæ¸¬</summary>
          <pre><code>import cv2
      import mediapipe as mp
      import numpy as np

      conn = mp.solutions.pose.POSE_CONNECTIONS
      pose = mp.solutions.pose.Pose(min_detection_confidence=0.5, min_tracking_confidence=0.5)
      mpd = mp.solutions.drawing_utils
      spec = mp.solutions.drawing_styles.get_default_pose_landmarks_style()

      cap = cv2.VideoCapture('../video/CCC.mp4')
      while cap.isOpened():
        success, image = cap.read()
        imgrgb = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)
        bkb = np.zeros(image.shape, dtype=np.uint8)
        results = pose.process(imgrgb)
        if results.pose_landmarks:
            mpd.draw_landmarks(image, results.pose_landmarks, conn, spec)
            mpd.draw_landmarks(bkb, results.pose_landmarks, conn, spec)
        cv2.imshow('B11108029_pose2', image)
        cv2.imshow('B11108029_pose2 Black', bkb)
        if cv2.waitKey(5) & 0xFF == 27:
          break
      cap.release()
      cv2.destroyAllWindows()</code></pre>
        </details>
      </div>

      <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">è¤‡è£½</button>
        <details open>
          <summary>ğŸ“„ AI073ï½œYouTube å§¿å‹¢è¾¨è­˜</summary>
          <pre><code>import cv2
      import mediapipe as mp
      import numpy as np
      import yt_dlp

      conn = mp.solutions.pose.POSE_CONNECTIONS
      pose = mp.solutions.pose.Pose(min_detection_confidence=0.5, min_tracking_confidence=0.5)
      mpd = mp.solutions.drawing_utils
      spec = mp.solutions.drawing_styles.get_default_pose_landmarks_style()

      video_url = "https://youtu.be/XWPnwR3YiuI?si=Cb1VWAbex5n8NuFV"
      ydl_opts = {'format': 'best',  'quiet': True }
      with yt_dlp.YoutubeDL(ydl_opts) as ydl:
        info_dict = ydl.extract_info(video_url, download=False)
      stream_url = info_dict['url']

      cap = cv2.VideoCapture(stream_url)
      while cap.isOpened():
        success, image = cap.read()
        image = cv2.resize(image, (520, 300))
        imgrgb = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)
        bkb = np.zeros(image.shape, dtype=np.uint8)
        results = pose.process(imgrgb)
        if results.pose_landmarks:
            mpd.draw_landmarks(image, results.pose_landmarks, conn, spec)
            mpd.draw_landmarks(bkb, results.pose_landmarks, conn, spec)
        cv2.imshow('B11108029_pose2', image)
        cv2.imshow('B11108029_pose2 Black', bkb)
        if cv2.waitKey(5) & 0xFF == 27:
          break
      cap.release()
      cv2.destroyAllWindows()</code></pre>
        </details>
      </div>

      <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">è¤‡è£½</button>
        <details open>
          <summary>ğŸ“„ AI074ï½œæ‰‹å‹¢è§’åº¦ã€å½èˆ‰æ¬¡æ•¸è¨ˆç®—</summary>
          <pre><code>import cv2
            import mediapipe as mp
            import numpy as np
            import math

            pose = mp.solutions.pose.Pose()
            conn = mp.solutions.pose.POSE_CONNECTIONS
            mpd = mp.solutions.drawing_utils
            spec = mp.solutions.drawing_styles.get_default_pose_landmarks_style()

            switch_right, switch_left = 0, 0
            count_right, count_left = 0, 0
            color_right, color_left = (0, 0, 255), (0, 0, 255)

            cap = cv2.VideoCapture(0)
            while cap.isOpened():
              success, image = cap.read()
              imgrgb = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)
              results = pose.process(imgrgb)
              h, w, c = image.shape
              xx1 = int(w * 0.1)
              xx2 = int(w * 0.7)
              poslist = []

              if results.pose_landmarks:
                  mpd.draw_landmarks(image, results.pose_landmarks, conn, spec)
                  for id, lm in enumerate(results.pose_landmarks.landmark):
                      cx, cy = int(lm.x * w), int(lm.y * h)
                      poslist.append([id, cx, cy])

              try:
                  x1, y1 = poslist[12][1], poslist[12][2]
                  x2, y2 = poslist[14][1], poslist[14][2]
                  x3, y3 = poslist[16][1], poslist[16][2]

                  right_angle = abs(int(math.degrees(math.atan2(y1 - y2, x1 - x2) - math.atan2(y3 - y2, x3 - x2))))

                  x1l, y1l = poslist[11][1], poslist[11][2]
                  x2l, y2l = poslist[13][1], poslist[13][2]
                  x3l, y3l = poslist[15][1], poslist[15][2]

                  left_angle = abs(int(math.degrees(math.atan2(y1l - y2l, x1l - x2l) - math.atan2(y3l - y2l, x3l - x2l))))

                  right_per = np.interp(right_angle, (10, 170), (100, 0))
                  right_bar = int(np.interp(right_angle, (10, 170), (200, 400)))
                  left_per = np.interp(left_angle, (10, 170), (100, 0))
                  left_bar = int(np.interp(left_angle, (10, 170), (200, 400)))

                  cv2.rectangle(image, (xx1, int(right_bar)), (xx1 + 30, 400), color_right, cv2.FILLED)
                  cv2.putText(image, str(int(right_per)) + '%', (xx1 - 10, 450), cv2.FONT_HERSHEY_SIMPLEX, 1, color_right, 2)

                  cv2.rectangle(image, (xx2, int(left_bar)), (xx2 + 30, 400), color_left, cv2.FILLED)
                  cv2.putText(image, str(int(left_per)) + '%', (xx2 - 10, 450), cv2.FONT_HERSHEY_SIMPLEX, 1, color_left, 2)

                  if right_per >= 95:
                      color_right = (0, 255, 0)
                      if switch_right == 0:
                          count_right += 0.5
                          switch_right = 1
                  if right_per <= 5:
                      if switch_right == 1:
                          count_right += 0.5
                          switch_right = 0

                  if left_per >= 95:
                      color_left = (0, 100, 10)
                      if switch_left == 0:
                          count_left += 0.5
                          switch_left = 1
                  if left_per <= 5:
                      if switch_left == 1:
                          count_left += 0.5
                          switch_left = 0

              except:
                  pass

              cv2.putText(image, str(int(count_right)), (xx1 - 40, 100), cv2.FONT_HERSHEY_SIMPLEX, 2, (0, 0, 255), 6)
              cv2.putText(image, str(int(count_left)), (xx2 - 40, 100), cv2.FONT_HERSHEY_SIMPLEX, 2, (120, 300, 0), 6)

              cv2.imshow('B11108029_pose3', image)

              if cv2.waitKey(5) & 0xFF == 27:
                  break

            cap.release()
            cv2.destroyAllWindows()
code></pre>
        </details>
      </div>


      <div class="project-card ai">
        <h3>ğŸ–ï¸ æ‰‹éƒ¨è¿½è¹¤ Ã— æŒ‡å°–äº’å‹•å°éŠæˆ²</h3>
        <p>ä»¥ MediaPipe Hands é€²è¡Œå³æ™‚æ‰‹å‹¢åµæ¸¬èˆ‡æ‰‹æŒ‡ä½ç½®è¿½è¹¤ï¼Œä¸¦å»¶ä¼¸äº’å‹•éŠæˆ²è¨­è¨ˆã€‚</p>
        <a href= "/pages/AI08X_hand.html" class="btn btn-outline-primary mt-2">æŸ¥çœ‹æ›´å¤š</a>
      </div>
      
      <a href="../index.html#code-projects" class="back-btn">â† å›åˆ°ä½œå“é›†</a>
    </section>
    
    <script>
      function copyCode(button) {
        const codeBlock = button.nextElementSibling.querySelector('code');
        const text = codeBlock.innerText;
        navigator.clipboard.writeText(text).then(() => {
          button.innerText = 'âœ… å·²è¤‡è£½';
          setTimeout(() => { button.innerText = 'è¤‡è£½'; }, 1500);
        });
      }
    </script>

</body>
</html>
