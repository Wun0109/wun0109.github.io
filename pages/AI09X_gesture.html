<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gesture æ‰‹å‹¢è¾¨è­˜æ‡‰ç”¨</title>
  <link href="../style.css" rel="stylesheet" />
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.1/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background-color: #f5f7fa;
      font-family: 'Noto Sans TC', sans-serif;
    }

    .title-bar {
      background: linear-gradient(90deg, #3b5773 0%, #4e6c8f 100%);
      color: white;
      text-align: center;
      padding: 1.5rem 1rem 1rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    .title-bar h1 {
      font-size: 2.2rem;
      font-weight: 700;
      letter-spacing: 0.5px;
    }

    .content-section {
      max-width: 880px;
      margin: 0 auto;
      padding: 0 1rem 2rem;
    }

    .section-heading {
      font-size: 1.25rem;
      margin-top: 2.5rem;
      font-weight: bold;
      color: #3b5773;
      border-bottom: 2px solid #3b5773;
      padding-bottom: 0.4rem;
    }

    .image-box {
      text-align: center;
      margin: 1.5rem auto;
    }

    .image-box img {
      max-width: 100%;
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 0.5rem;
    }

    figcaption {
      font-size: 0.9rem;
      color: #555;
      margin-top: 0.25rem;
    }

    .info-group {
      text-align: left;
      max-width: 800px;
      margin: 1rem auto;
      padding-left: 0;
    }

    .info-group p {
      margin: 0.2rem 0;
    }

    .code-container {
      margin: 2rem 0;
      background: #f8f9fa;
      border-radius: 8px;
      padding: 1rem;
      border: 1px solid #ccc;
      position: relative;
      text-align: left;
    }

    .code-container details summary {
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 0.5rem;
      color: #3b5773;
    }

    .code-container pre {
      background: #f1f1f1;
      padding: 1rem;
      border-radius: 8px;
      overflow-x: auto;
      margin: 0;
      white-space: pre-wrap;
    }

    .copy-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: #3b5773;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 0.3rem 0.7rem;
      font-size: 0.85rem;
      cursor: pointer;
    }

    .copy-btn:active {
      background-color: #2c3e50;
    }

    .back-btn {
      margin-top: 2rem;
      display: inline-block;
      background-color: #3b5773;
      color: white;
      padding: 0.6rem 1.2rem;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
      transition: background-color 0.3s ease;
    }

    .back-btn:hover {
      background-color: #2c3e50;
    }
  </style>
</head>
<body>
  <div class="title-bar">
    <h1>Gesture æ‰‹å‹¢è¾¨è­˜æ‡‰ç”¨</h1>
  </div>
  
  <section class="welcome-section">
    <div class="info-group">
      <p>ğŸ“Œ<strong>æŠ€è¡“å·¥å…·ï¼š</strong>ï¼šMediaPipe Handsã€è§’åº¦æ¨è«–ã€åˆ†é¡æ¨¡å‹ã€Teachable Machine</p>
      <p>ğŸ¯ <strong>æ‡‰ç”¨æƒ…å¢ƒï¼š</strong>ï¼šç›´æ’­é–“ä¸é›…æ‰‹å‹¢éæ¿¾ã€äº’å‹•éŠæˆ²æ§åˆ¶ã€ç‰©å“åµæ¸¬æç¤º</p>
    </div>
    
    <h2 class="section-heading">åŠŸèƒ½ç°¡ä»‹</h2>
    <div class="info-group">
      <p>
        æœ¬å°ˆæ¡ˆçµåˆ MediaPipe èˆ‡æ·±åº¦å­¸ç¿’æŠ€è¡“ï¼Œå±•ç¤ºä¸‰ç¨®æ‰‹å‹¢è¾¨è­˜æ–¹å¼çš„å¯¦ä½œæ‡‰ç”¨ã€‚<br><br>
        <strong>AI091ï½œåŸºæ–¼è§’åº¦çš„æ‰‹å‹¢æ¨è«–</strong> é€éæ‰‹éƒ¨é—œéµé»çš„å‘é‡è§’åº¦è¨ˆç®—ï¼Œå®šç¾©å¤šçµ„å¸¸è¦‹æ‰‹å‹¢ä¸¦é€²è¡Œæ¨è«–ï¼Œç‚ºç„¡é ˆè¨“ç·´æ¨¡å‹çš„é‚è¼¯å¼è¾¨è­˜ç¯„ä¾‹ã€‚<br><br><strong>AI092ï½œMediaPipe å…§å»ºæ‰‹å‹¢è¾¨è­˜</strong> ä½¿ç”¨ MediaPipe æä¾›çš„æ‰‹å‹¢æ¨¡å‹ï¼Œå³æ™‚è¾¨è­˜å¦‚å‹åˆ©ã€æ¯”è®šç­‰æ‰‹å‹¢ä¸¦é¡¯ç¤ºä¿¡å¿ƒå€¼ã€‚<br><br>
        <strong>AI093ï½œTeachable Machine æ¨¡å‹è¾¨è­˜</strong> å‰‡å°å…¥ Google Teachable Machine è‡ªè¡Œè¨“ç·´çš„åˆ†é¡æ¨¡å‹ï¼Œå¯è¾¨è­˜å¦‚ã€Œé£²æ–™ã€ã€ã€Œæ‰‹æ©Ÿã€ç­‰è‡ªå®šç¾©æ‰‹å‹¢ç‰©ä»¶ï¼Œå±•ç¾é«˜è‡ªç”±åº¦çš„è¾¨è­˜æ‡‰ç”¨ã€‚<br><br>æ•´é«”åŠŸèƒ½å¯æ‡‰ç”¨æ–¼äººæ©Ÿäº’å‹•ã€æ‰‹å‹¢æ§åˆ¶ã€äº’å‹•éŠæˆ²èˆ‡è¦–è¦ºè¾¨è­˜ä»‹é¢é–‹ç™¼ç­‰å¤šå…ƒå ´æ™¯ã€‚
      </p>
    </div>

    <h2 class="section-heading">ğŸ“¸ æ‰‹å‹¢åµæ¸¬ç•«é¢å±•ç¤º</h2>
    <div class="image-box">
      <img src="../images/W4P3.jpg" alt="good æ‰‹å‹¢è¾¨è­˜" />
      <figcaption>â–² AI091 åˆ©ç”¨é—œç¯€è§’åº¦æ¨è«–åˆ¤æ–·æ‰‹å‹¢ç‚ºã€Œgoodã€</figcaption>
    </div>
    <div class="image-box">
      <img src="../images/W4P4.jpg" alt="no!!! æ¨¡ç³Šè™•ç†" />
      <figcaption>â–² AI091 ç•¶è¾¨è­˜åˆ°ä¸é›…æ‰‹å‹¢æ™‚è‡ªå‹•æ¨¡ç³Šè™•ç†ç•«é¢ï¼Œé¿å…ç›´æ’­é–“èª¤è§¸</figcaption>
    </div>
    <div class="image-box">
      <img src="../images/W4P5.jpg" alt="AI092 æ‰‹å‹¢åˆ†é¡" />
      <figcaption>â–² AI092 ä½¿ç”¨ MediaPipe æ¨¡å‹å³æ™‚è¾¨è­˜æ‰‹å‹¢ï¼Œé¡¯ç¤ºåˆ†é¡èˆ‡ä¿¡å¿ƒåˆ†æ•¸</figcaption>
    </div>
    <div class="image-box">
      <img src="../images/W4P6.jpg" alt="é›™æ‰‹æ‰‹å‹¢åŒæ­¥åˆ†é¡" />
      <figcaption>â–² AI092 é¡¯ç¤ºé›™æ‰‹ç¨ç«‹æ‰‹å‹¢åˆ†é¡çµæœï¼Œå¯å»¶ä¼¸æ‡‰ç”¨æ–¼æ‰‹å‹¢æ§åˆ¶</figcaption>
    </div>
    <div class="image-box">
      <img src="../images/W5P1.jpg" alt="nestea è¾¨è­˜" />
      <figcaption>â–² AI093 ä½¿ç”¨ Teachable Machine æ¨¡å‹è¾¨è­˜ nestea é£²å“</figcaption>
    </div>
    <div class="image-box">
      <img src="../images/W5P2.jpg" alt="tissue è¾¨è­˜" />
      <figcaption>â–² AI093 åµæ¸¬ tissue ç‰©ä»¶ä¸¦é¡¯ç¤ºåˆ†é¡çµæœ</figcaption>
    </div>
    <div class="image-box">
      <img src="../images/W5P3.jpg" alt="phone è¾¨è­˜" />
      <figcaption>â–² AI093 æˆåŠŸè¾¨è­˜æ‰‹æ©Ÿä¸¦é¡¯ç¤ºæ¨™ç±¤ã€Œphoneã€</figcaption>
    </div>
    
        </div>
    <section class="content-section">
      <h2 class="section-heading">ç¨‹å¼ç¢¼ç‰‡æ®µ</h2>
      <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">è¤‡è£½</button>
        <details open>
          <summary>ğŸ“„ AI091ï½œåŸºæ–¼è§’åº¦çš„æ‰‹å‹¢æ¨è«–</summary>
          <pre><code id="code1">import cv2
          import mediapipe as mp
          import math

          mpd = mp.solutions.drawing_utils
          mph = mp.solutions.hands

          def vector_2d_angle(v1, v2):
              try:
                  angle = math.degrees(math.acos(
                      (v1[0]*v2[0]+v1[1]*v2[1]) /
                      (((v1[0]**2+v1[1]**2)**0.5)*((v2[0]**2+v2[1]**2)**0.5))
                  ))
              except:
                  angle = 180
              return angle

          def hand_angle(hand_):
              angles = []
              def a(p1, p2, p3, p4): return vector_2d_angle(
                  (hand_[p1][0] - hand_[p2][0], hand_[p1][1] - hand_[p2][1]),
                  (hand_[p3][0] - hand_[p4][0], hand_[p3][1] - hand_[p4][1])
              )
              angles.append(a(0, 2, 3, 4))
              angles.append(a(0, 6, 7, 8))
              angles.append(a(0, 10, 11, 12))
              angles.append(a(0, 14, 15, 16))
              angles.append(a(0, 18, 19, 20))
              return angles

          def hand_pos(angle_list):
              f1, f2, f3, f4, f5 = angle_list
              if f1<50 and f2>=50 and f3>=50 and f4>=50 and f5>=50: return 'good'
              if f1>=50 and f2>=50 and f3<50 and f4>=50 and f5>=50: return 'no!!!'
              if f1<50 and f2<50 and f3>=50 and f4>=50 and f5<50: return 'ROCK!'
              if f1>=50 and all(f>=50 for f in [f2,f3,f4,f5]): return '0'
              if f1>=50 and all(f>=50 for f in [f2,f3,f4]) and f5<50: return 'pinky'
              if f1>=50 and f2<50 and all(f>=50 for f in [f3,f4,f5]): return '1'
              if f1>=50 and all(f<50 for f in [f2,f3]) and f4>=50 and f5>=50: return '2'
              if f1>=50 and f2>=50 and all(f<50 for f in [f3,f4,f5]): return 'ok'
              if f1<50 and f2>=50 and all(f<50 for f in [f3,f4,f5]): return 'ok'
              if f1>=50 and all(f<50 for f in [f2,f3,f4]) and f5>50: return '3'
              if f1>=50 and all(f<50 for f in [f2,f3,f4,f5]): return '4'
              if f1<50 and all(f<50 for f in [f2,f3,f4,f5]): return '5'
              if f1<50 and all(f>=50 for f in [f2,f3,f4]) and f5<50: return '6'
              if f1<50 and f2<50 and f3>=50 and f4>=50 and f5>=50: return '7'
              if f1<50 and all(f<50 for f in [f2,f3]) and f4>=50 and f5>=50: return '8'
              if f1<50 and all(f<50 for f in [f2,f3,f4]) and f5>=50: return '9'
              return ''

          cap = cv2.VideoCapture(0)
          hands = mph.Hands(model_complexity=0, max_num_hands=1)
          w, h = 540, 310

          while cap.isOpened():
              success, image = cap.read()
              if not success:
                  break
              img = cv2.resize(image, (w, h))
              results = hands.process(cv2.cvtColor(img, cv2.COLOR_BGR2RGB))
              if results.multi_hand_landmarks:
                  for handLms in results.multi_hand_landmarks:
                      points = [(lm.x * w, lm.y * h) for lm in handLms.landmark]
                      if points:
                          angles = hand_angle(points)
                          gesture = hand_pos(angles)
                          if gesture == 'no!!!':
                              img = cv2.GaussianBlur(img, (35, 35), 0)
                          cv2.putText(img, gesture, (30, 120), 1, 5, (0, 0, 255), 10)
              cv2.imshow('B11108029_gesture1', img)
              if cv2.waitKey(5) & 0xFF == 27:
                  break
          cap.release()
          cv2.destroyAllWindows()
</code></pre>
        </details>
      </div>
      <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">è¤‡è£½</button>
        <details>
          <summary>ğŸ“„ AI092ï½œMediaPipe å…§å»ºæ‰‹å‹¢è¾¨è­˜</summary>
          <pre><code id="code2">import cv2
          import mediapipe as mp
          from mediapipe.tasks import python
          from mediapipe.tasks.python import vision

          base_options = python.BaseOptions(model_asset_path='../models/gesture_recognizer.task')
          options = vision.GestureRecognizerOptions(base_options=base_options, num_hands=1)
          recognizer = vision.GestureRecognizer.create_from_options(options)

          cap = cv2.VideoCapture(0)
          while cap.isOpened():
              success, image = cap.read()
              if not success:
                  break
              imgrgb = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)
              image_mp = mp.Image(image_format=mp.ImageFormat.SRGB, data=imgrgb)
              result = recognizer.recognize(image_mp)
              if result.gestures:
                  top = result.gestures[0][0]
                  cv2.putText(image, f'{top.category_name} ({top.score:.2f})', (30, 90),
                              2, 2, (0, 255, 255), 2)
              cv2.imshow('B11108029_gesture2', image)
              if cv2.waitKey(5) & 0xFF == 27:
                  break
          cap.release()
          cv2.destroyAllWindows()
</code></pre>
        </details>
      </div>
      <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">è¤‡è£½</button>
        <details>
          <summary>ğŸ“„ AI093ï½œTeachable Machine æ¨¡å‹è¾¨è­˜</summary>
          <pre><code id="code3">import tensorflow as tf
          import cv2
          import numpy as np

          model = tf.keras.models.load_model('../models/keras_model.h5', compile=False)
          data = np.ndarray(shape=(1, 224, 224, 3), dtype=np.float32)

          cap = cv2.VideoCapture(0)
          while cap.isOpened():
              success, image = cap.read()
              if not success:
                  break
              img = cv2.resize(image, (224, 224))
              img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)
              image = cv2.flip(image, 1)
              normalized = (img.astype(np.float32) / 127.0) - 1
              data[0] = normalized
              prediction = model.predict(data)[0]
              labels = ['phone', 'nestea', 'tissue']
              colors = [(255, 0, 255), (255, 0, 0), (0, 0, 255)]
              for i, (label, threshold) in enumerate(zip(labels, [0.7, 0.2, 0.4])):
                  if prediction[i] > threshold:
                      cv2.putText(image, label, (30 + i*100, 120), 1, 3, colors[i], 8)
              cv2.imshow('B11108029_gesture3', image)
              if cv2.waitKey(500) & 0xFF == 27:
                  break
          cap.release()
          cv2.destroyAllWindows()
</code></pre>
        </details>
      </div>
      <a href="../index.html#code-projects" class="back-btn">â† å›åˆ°ä½œå“é›†</a>
    </section>

                <script>
                  function copyCode(button) {
                    const code = button.parentElement.querySelector('code');
                    navigator.clipboard.writeText(code.textContent).then(() => {
                      button.textContent = 'å·²è¤‡è£½';
                      setTimeout(() => button.textContent = 'è¤‡è£½', 2000);
                    });
                  }
                </script>
</body>
</html>
